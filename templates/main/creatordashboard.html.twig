{% extends 'base.html.twig' %}

{% block title %}{% trans %}Espace cr√©ateur{% endtrans %}{% endblock %}

{% block body %}

<div class="ui top attached tabular menu">
  <a class="item active" data-tab="courses">E-Learning</a>
  <a class="item disabled" data-content="Disponible prochainement" data-tab="projects">Gestion de projets</a>
</div>
{# DEBUT TAB ELEARNING#}
<div class="ui bottom attached tab segment active" data-tab="courses">

    <h3>Cr√©er un cours</h3>
    <p>Cr√©√©z un cours comportant des <b>sections</b>, des <b>quizz</b> et un <b>suivi utilisateur complet.</b> Vous pourrez y ajouter toutes sortes de m√©dias.</p> 
    <p><b>Tout est sauvegard√© :</b> vous pourrez reprendre la r√©daction du cours √† n'importe quel moment.</p>
    <p>Vous pouvez √©galement consulter le <a data-tooltip='Bient√¥t disponible'>tutoriel de cr√©ation de cours</a>.</p>
    <a href="{{ path('newCourse') }}" class="ui primary basic button centered item buttonintro">
      <i class="pencil alternate icon"></i>{% trans %}Cr√©er un cours{% endtrans %}
    </a>

<div class="ui divider"></div>


<div class="savedcourses">  
<h3>Mes cours sauvegard√©s</h3>
<table class="ui very basic sortable celled table">
  <thead>
    <tr><th>Titre</th>
    <th>Description</th>
    <th>Date</th>
    <th>Derni√®re √©tape enregistr√©e</th>
  </tr></thead>
  <tbody>
  {% for course in usersCourses %}
  {% if course.state == "saved" %}
    <tr>
      <td>
        <a class="ui image header" href="{{path("editsections", { 'id': course.id })}}">
          <img class="ui fluid image" src="/uploads/coursesimages/{{course.brochureFileName}}">
          <div class="content">
           {{course.title}}
          </div>
      </a></td>
      <td>
        {{ (course.description|length > 100 ? course.description|slice(0, 100) ~ '...' : course.description)|raw  }}
      </td>
      <td>
        {{course.createdat|format_datetime(locale='fr',pattern="EEEE dd MMMM YYYY")}}
      </td>
      {% if course.step == 2 %}
      <td class="selectable positive">
        <a href="{{path("editsections", { 'id': course.id })}}" class="header popup">Sections</a>
      </td>
      {% else %}
      <td class="selectable warning">
        <a href="{{path("editCourse", { 'slug': course.slug })}}" class="header popup">Informations</a>
      </td>
      {% endif %}
      </td>
    </tr>
  {% endif %}
  {% endfor %}
  </tbody>
</table>
</div>

<div class="ui divider"></div>

<div class="publishedcourses">  
<h3>{% trans %}Mes cours publi√©s{% endtrans %}</h3>
<table class="ui very basic sortable celled table">
  <thead>
    <tr><th>{% trans %}Titre{% endtrans %}</th>
    <th>{% trans %}Description{% endtrans %}</th>
    <th>Date</th>
    <th>{% trans %}Nombre de vues{% endtrans %}</th>
    <th>{% trans %}Est publi√©{% endtrans %}</th>
  </tr></thead>
  <tbody>
  {% for course in usersCourses %}
  {% if course.state == "published" %}
    <tr>
      <td class="selectable">
        <a class="ui image header" href="/startCourse/{{course.slug}}">
          <img class="ui fluid image" src="/uploads/coursesimages/{{course.brochureFileName}}">
          <div class="content">
           {{course.title}}
          </div>
      </a></td>
      <td>
        {{ (course.description|length > 100 ? course.description|slice(0, 100) ~ '...' : course.description)|raw  }}
      </td>
      <td>
        {{course.createdat|format_datetime(locale='fr',pattern="EEEE dd MMMM YYYY")}}
      </td>
      <td>
        {{course.views}}
      </td>
      <td class="positive">{% trans %}Publi√© {% endtrans %}‚úÖ</td>
      </td>
    </tr>
  {% endif %}
  {% endfor %}
  </tbody>
</table>
</div>

{# FIN TAB ELEARNING #}

</div>





<script>
$('.popup')
  .popup()
;

$('table').tablesort()

{% if app.user.tutorial %}
introJs()
.setOption("nextLabel", "Suivant")
.setOption("prevLabel", "Pr√©c√©dent")
.setOption("doneLabel", "Termin√© !")
.setOptions({
  buttonClass: 'ui button',
  showProgress: true,
  steps: [{
    intro: "Bienvenue dans l'espace cr√©ateur ! üìô"
  }, 
 {
    element: document.querySelector('.savedcourses'),
    intro: "Ici s'afficheront les cours sauvegard√©s"
  },
  {
    element: document.querySelector('.publishedcourses'),
    intro: "Ici s'afficheront les cours publi√©s"
  },
  {
    element: document.querySelector('.buttonintro'),
    intro: "Cliquez ici pour cr√©er un cours"
  }
]
}).start();
{% endif %}

</script>

{% endblock %}